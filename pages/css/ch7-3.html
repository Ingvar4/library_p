<!doctype html>
<html lang="ru">
  <head>
    <meta charset="utf-8">
    <link rel="shortcut icon" href="../../images/image.jpg" type="image/x-icon">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSS</title>
    <link rel="stylesheet" href="../../styles/style.css">
    <link rel="stylesheet" href="../../styles/prism.css">
    <script src="../../scripts/prism.js" defer></script>
    <script src="../../scripts/script.js" defer></script>
    <style>
      .bbox {
        width: 100px;
        height: 100px;
        background-color: red;
        animation: move 4s infinite;
      }

      @keyframes move {
        0% {
          transform: translateX(0);
        }
        50% {
          transform: translateX(200px);
        }
        100% {
          transform: translateX(0);
        }
      }

      .element {
      width: 100px;
      height: 100px;
      background-color: blue;
      animation: rotate-scale 3s ease-in-out infinite;
    }
    
    @keyframes rotate-scale {
      0% {
        transform: rotate(0deg) scale(1);
        opacity: 1;
      }
      50% {
        transform: rotate(180deg) scale(1.5);
        opacity: 0.5;
      }
      100% {
        transform: rotate(360deg) scale(1);
        opacity: 1;
      }
    }

    .element2 {
      width: 100px;
      height: 100px;
      background-color: blue;
      animation: fade-in 3s, move-right 3s infinite;
    }
    
    @keyframes fade-in {
      from {
        opacity: 1;
      }
      to {
        opacity: 0;
      }
    }
    
    @keyframes move-right {
      from {
        transform: translateX(0);
      }
      to {
        transform: translateX(200px);
      }
    }

    .box {
      width: 100px;
      height: 100px;
      background-color: red;
      /* Изначально отключаем анимацию */
      animation: none;
    }
    .animate {
      /* Добавляем класс с анимацией */
      animation: scale-up 2s forwards;
    }
    @keyframes scale-up {
      from {
        transform: scale(1);
      }
      to {
        transform: scale(1.5);
      }
    }
    </style>
  </head>

  <body>
    <!--шапка с кнопками переходами-->
    <header class="main-header-top">
      <div class="header-logo">
        <img src="../../images/image2.png">
      </div>
      
      <ul>
        <li><a href="../../index.html">Home</a></li>
        <li><a href="../../pages/html.html">HTML</a></li>
        <li><a href="../../pages/css.html">CSS</a></li>
        <li><a href="../../pages/js.html">JS</a></li>
      </ul>
    </header>

    <!--основной блок с информацией-->
    <main>
      <article>
        <h1>Анимации: свойство animation, ключевые кадры @keyframes.</h1><hr>
        <p>CSS-анимации позволяют анимировать элементы, изменяя их свойства плавно с течением времени. Основные инструменты для создания анимаций — это свойство <code>animation</code> и ключевые кадры <code>@keyframes</code>.</p>
        <h3>Свойство animation</h3>
        <p>Свойство <code>animation</code> управляет анимацией элемента, включая её продолжительность, временные функции, задержки и повторения. Оно является шорткатом для нескольких отдельных свойств, которые можно также задавать отдельно:</p>
        <ol>
          <li><strong>animation-name</strong>: Название анимации, которая определена с помощью <code>@keyframes</code>.</li>
          <li><strong>animation-duration</strong>: Продолжительность анимации (например, <code>2s</code> для 2 секунд).</li>
          <li><strong>animation-timing-function</strong>: Функция времени (например, <code>ease</code>, <code>linear</code>, <code>ease-in</code>, <code>ease-out</code>, <code>cubic-bezier(...))</code>.</li>
          <li><strong>animation-delay</strong>: Задержка перед началом анимации.</li>
          <li><strong>animation-iteration-count</strong>: Количество повторов анимации (<code>infinite</code> для бесконечного повторения).</li>
          <li><strong>animation-direction</strong>: Направление анимации (<code>normal</code>, <code>reverse</code>, <code>alternate</code>, <code>alternate-reverse</code>).</li>
          <li><strong>animation-fill-mode</strong>: Определяет, как будет отображаться элемент до и после выполнения анимации (<code>none</code>, <code>forwards</code>, <code>backwards</code>, <code>both</code>).</li>
          <li><strong>animation-play-state</strong>: Управляет состоянием анимации (<code>running</code> или <code>paused</code>).</li>
        </ol>
        <hr>

        <h3>Синтаксис шортката animation</h3>
<pre>
  <code class="lang-css">
    /*CSS*/

    .element {
      animation: slide-in 2s ease-in-out 1s 3 normal forwards;
    }
  </code>
</pre>
        <ul>
          <li><strong>slide-in</strong> — имя анимации.</li>
          <li><strong>2s</strong> — продолжительность.</li>
          <li><strong>ease-in-out</strong> — функция времени.</li>
          <li><strong>1s</strong> — задержка перед стартом.</li>
          <li><strong>3</strong> — количество повторов.</li>
          <li><strong>normal</strong> — направление.</li>
          <li><strong>forwards</strong> — поведение после завершения.</li>
        </ul>
        <hr>

        <h3>Ключевые кадры @keyframes</h3>
        <p>Ключевые кадры определяют, как должно изменяться свойство элемента на протяжении анимации. Они задаются с помощью правила <code>@keyframes</code>.</p>
<pre>
  <code class="lang-css">
    /*CSS*/

    @keyframes slide-in {
      from {
        transform: translateX(-100%);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }
  </code>
</pre>
        <ul>
          <li><strong>from</strong>: Начальная точка анимации (эквивалент <code>0%</code>).</li>
          <li><strong>to</strong>: Конечная точка анимации (эквивалент <code>100%</code>).</li>
        </ul>
        <p>Вы также можете использовать проценты для более сложных анимаций:</p>
<pre>
  <code class="lang-css">
    /*CSS*/

    @keyframes bounce {
      0% {
        transform: translateY(0);
      }
      50% {
        transform: translateY(-50px);
      }
      100% {
        transform: translateY(0);
      }
    }
  </code>
</pre>

        <h3>Примеры использования</h3>
        <ol>
          <li>Простая анимация</li>
        </ol>
<pre>
  <code class="lang-css">
    /*CSS*/

    .box {
      width: 100px;
      height: 100px;
      background-color: red;
      animation: move 4s infinite;
    }
    
    @keyframes move {
      0% {
        transform: translateX(0);
      }
      50% {
        transform: translateX(200px);
      }
      100% {
        transform: translateX(0);
      }
    }
  </code>
</pre>

        <div class="result">
          <p class="resultP"><strong>Результат:</strong></p>
          
          <div class="bbox"></div>
        </div>

        <ul>
          <li>Описание: Красный квадрат перемещается горизонтально в течение 4 секунд и повторяет анимацию бесконечно.</li>
        </ul>
        <hr>

        <h3>Подробное объяснение свойств</h3>
        <ol>
          <li><strong>animation-name</strong>: Название анимации должно совпадать с именем, заданным в <code>@keyframes</code>.</li>
          <li><strong>animation-duration</strong>: Указывает, как долго будет длиться анимация. Можно использовать значения в секундах (s) или миллисекундах (ms).</li>
          <li><strong>animation-timing-function</strong>: Определяет ускорение или замедление анимации.
            <ul>
              <li><strong>linear</strong>: Анимация выполняется с постоянной скоростью.</li>
              <li><strong>ease</strong>: Анимация начинается медленно, затем ускоряется и снова замедляется.</li>
              <li><strong>ease-in</strong>: Анимация начинается медленно, затем ускоряется.</li>
              <li><strong>ease-out</strong>: Анимация начинается быстро, затем замедляется.</li>
              <li><strong>cubic-bezier(x1, y1, x2, y2)</strong>: Пользовательская кривая ускорения.</li>
            </ul>
          </li>
          <li><strong>animation-delay</strong>: Указывает, через сколько времени после загрузки страницы анимация должна начаться.</li>
          <li><strong>animation-iteration-count</strong>: Количество раз, которое анимация должна повториться. Можно использовать целые числа или <code>infinite</code> для бесконечного повторения.</li>
          <li><strong>animation-direction</strong>:
            <ul>
              <li><strong>normal</strong>: Анимация проигрывается в обычном порядке.</li>
              <li><strong>reverse</strong>: Анимация проигрывается в обратном порядке.</li>
              <li><strong>alternate</strong>: Анимация чередуется между нормальным и обратным порядком.</li>
              <li><strong>alternate-reverse</strong>: Анимация начинается с обратного порядка, затем нормального.</li>
            </ul>
          </li>
          <li><strong>animation-fill-mode</strong>:
            <ul>
              <li><strong>none</strong>: По умолчанию. Анимация не изменяет стиль элемента до или после её выполнения.</li>
              <li><strong>forwards</strong>: Элемент сохраняет стиль последнего ключевого кадра после завершения анимации.</li>
              <li><strong>backwards</strong>: Элемент принимает стиль первого ключевого кадра перед началом анимации.</li>
              <li><strong>both</strong>: Применяет и <code>forwards</code>, и <code>backwards</code>.</li>
            </ul>
          </li>
          <li><strong>animation-play-state</strong>:
            <ul>
              <li><strong>running</strong>: Анимация играет.</li>
              <li><strong>paused</strong>: Анимация остановлена.</li>
            </ul>
          </li>
        </ol>
        <hr>

        <h3>Сложные анимации и последовательности</h3>
        <p>Для создания сложных анимационных эффектов можно комбинировать несколько анимаций или использовать более детализированные ключевые кадры. Это позволяет анимировать несколько свойств одновременно или задавать эффекты, которые запускаются в определённой последовательности.</p>
        <h4>Пример сложной анимации</h4>
<pre>
  <code class="lang-css">
    /*CSS*/

    .element {
      width: 100px;
      height: 100px;
      background-color: blue;
      animation: rotate-scale 3s ease-in-out infinite;
    }
    
    @keyframes rotate-scale {
      0% {
        transform: rotate(0deg) scale(1);
        opacity: 1;
      }
      50% {
        transform: rotate(180deg) scale(1.5);
        opacity: 0.5;
      }
      100% {
        transform: rotate(360deg) scale(1);
        opacity: 1;
      }
    }
  </code>
</pre>

        <div class="result">
          <p class="resultP"><strong>Результат:</strong></p>
          
          <div class="element"></div>
        </div>

        <ul>
          <li>Описание: Элемент поворачивается на 360 градусов и масштабируется до 1.5x с изменением прозрачности. Анимация бесконечна.</li>
        </ul>
        <hr>

        <h3>Комбинирование нескольких анимаций</h3>
        <p>Элемент может иметь несколько анимаций, перечисленных через запятую:</p>
<pre>
  <code class="lang-css">
    /*CSS*/

    .element2 {
      width: 100px;
      height: 100px;
      background-color: blue;
      animation: fade-in 3s, move-right 3s infinite;
    }
    
    @keyframes fade-in {
      from {
        opacity: 1;
      }
      to {
        opacity: 0;
      }
    }
    
    @keyframes move-right {
      from {
        transform: translateX(0);
      }
      to {
        transform: translateX(200px);
      }
    }
  </code>
</pre>

        <div class="result">
          <p class="resultP"><strong>Результат:</strong></p>
          
          <div class="element2"></div>
        </div>

        <ul>
          <li>Описание: Элемент одновременно исчезает и перемещается вправо.</li>
        </ul>
        <hr>

        <h3>Сочетание CSS-анимаций с JavaScript</h3>
        <p>Иногда требуется управлять анимациями с помощью JavaScript, чтобы запускать их в ответ на события, например, при клике или наведении. Для этого можно использовать методы изменения классов или манипулировать свойством <code>animation-play-state</code>.</p>
        <h4>Пример управления анимацией с JavaScript</h4>
<pre>
  <code class="lang-html">
    &lt;!-- HTML -->

    &lt;!DOCTYPE html>
    &lt;html lang="en">
    &lt;head>
      &lt;meta charset="UTF-8">
      &lt;title>Анимация с JavaScript</title>
      &lt;style>
        .box {
          width: 100px;
          height: 100px;
          background-color: red;
          /* Изначально отключаем анимацию */
          animation: none;
        }
        .animate {
          /* Добавляем класс с анимацией */
          animation: scale-up 2s forwards;
        }
        @keyframes scale-up {
          from {
            transform: scale(1);
          }
          to {
            transform: scale(1.5);
          }
        }
      &lt;/style>
    &lt;/head>
    &lt;body>
      &lt;div class="box" id="myBox">&lt;/div>
      &lt;button onclick="startAnimation()">Старт Анимации&lt;/button>

      &lt;script>
        function startAnimation() {
          const box = document.getElementById('myBox');
          // Удаляем класс, если он есть, и добавляем его снова, чтобы анимация перезапустилась
          box.classList.remove('animate');
          void box.offsetWidth; // Перезапускает анимацию путём перерасчёта стилей
          box.classList.add('animate');
        }
      &lt;/script>
    &lt;/body>
    &lt;/html>
  </code>
</pre>

        <div class="result">
          <p class="resultP"><strong>Результат:</strong></p>
          
          <div class="box" id="myBox"></div><br>
          <button onclick="startAnimation()">Старт Анимации</button>
        </div>
        
        <ul><li>Описание: При нажатии на кнопку элемент масштабируется с помощью добавления класса.</li></ul>
        <hr>

        <h3>Управление состоянием анимации</h3>
        <p>Можно приостанавливать и возобновлять анимации с помощью JavaScript, манипулируя <code>animation-play-state</code>.</p>
        <button onclick="pauseAnimation()">Пауза</button>
        <button onclick="resumeAnimation()">Возобновить</button>
<pre>
  <code class="lang-html">
    &lt;!-- HTML -->

    &lt;button onclick="pauseAnimation()">Пауза&lt;/button>
    &lt;button onclick="resumeAnimation()">Возобновить&lt;/button>

    &lt;script>
      const box = document.getElementById('myBox');

      function pauseAnimation() {
        box.style.animationPlayState = 'paused';
      }

      function resumeAnimation() {
        box.style.animationPlayState = 'running';
      }
    &lt;/script>
  </code>
</pre>
        <ul>
          <li>Описание: Анимация элемента может быть приостановлена и возобновлена.</li>
        </ul>
        <hr>

        <h3>Оптимизация производительности анимаций</h3>
        <p>Для обеспечения плавности анимаций и снижения нагрузки на браузер нужно учитывать несколько аспектов:</p>
        <ol>
          <li><strong>Анимируйте только необходимые свойства</strong>: Свойства, такие как <code>opacity</code> и <code>transform</code>, обрабатываются с использованием графического процессора (GPU), что делает их более производительными. Избегайте анимации <code>width</code>, <code>height</code>, <code>left</code>, <code>top</code>, так как они могут вызвать перерасчёт компоновки (layout recalculations).</li>
          <li><strong>Использование</strong> <code>will-change</code>: Подсказывает браузеру, что определённое свойство изменится, что помогает оптимизировать производительность.</li>
<pre>
  <code class="lang-css">
    /*CSS*/

    .element {
      will-change: transform, opacity;
    }
  </code>
</pre>
          <ul>
            <li>Примечание: Используйте <code>will-change</code> с осторожностью, так как оно может потреблять дополнительные ресурсы.</li>
          </ul>
          <li><strong>Минимизация перерисовок (repaints)</strong>: Перерисовки происходят при изменении свойств, влияющих на внешний вид элемента. Следует избегать частых изменений таких свойств.</li>
          <li><strong>Использование аппаратного ускорения</strong>: Трюки вроде использования <code>translate3d</code> или <code>translateZ</code> могут помочь задействовать GPU для обработки анимаций.</li>
        </ol>

        <h3>Отладка анимаций</h3>
        <ol>
          <li><strong>Инструменты разработчика браузера</strong>: Используйте Chrome DevTools или Firefox Developer Tools для анализа и отладки анимаций.</li>
          <li><strong>FPS Meter</strong>: Позволяет измерить частоту кадров (FPS) и увидеть, где могут быть проблемы с производительностью.</li>
        </ol>

        <h4>Заключение</h4>
        <p>CSS-анимации — это мощный инструмент, позволяющий сделать интерфейсы более живыми и отзывчивыми. Однако важно помнить об их влиянии на производительность и применять лучшие практики, чтобы обеспечить плавную работу на всех устройствах.</p>
      </article>
    </main>

    <!--блок в нижней части страницы-->
    <footer> 
      <p>©Copyright 2024 by nobody. All rights reversed.</p>
    </footer>

    <script>
      function startAnimation() {
        const box = document.getElementById('myBox');
        // Удаляем класс, если он есть, и добавляем его снова, чтобы анимация перезапустилась
        box.classList.remove('animate');
        void box.offsetWidth; // Перезапускает анимацию путём перерасчёта стилей
        box.classList.add('animate');
    }

      const box = document.getElementById('myBox');

      function pauseAnimation() {
        box.style.animationPlayState = 'paused';
      }

      function resumeAnimation() {
        box.style.animationPlayState = 'running';
      }
    </script>
  </body>
</html>