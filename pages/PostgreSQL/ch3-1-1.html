<!doctype html>
<html lang="ru">
  <head>
    <meta charset="utf-8">
    <link rel="shortcut icon" href="../../images/image.jpg" type="image/x-icon">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PostgreSQL</title>
    <link rel="stylesheet" href="../../styles/style.css">
    <link rel="stylesheet" href="../../styles/prism.css">
    <script src="../../scripts/prism.js" defer></script>
    <script src="../../scripts/script.js" defer></script>
  </head>

  <body>
    <!--шапка с кнопками переходами-->
    <header class="main-header-top">
      <div class="header-logo">
        <img src="../../images/image2.png">
      </div>
      
      <ul>
        <li><a href="../../index.html">Home</a></li>
        <li><a href="../../pages/html.html">HTML</a></li>
        <li><a href="../../pages/css.html">CSS</a></li>
        <li><a href="../../pages/js.html">JS</a></li>
      </ul>
    </header>

    <!--основной блок с информацией-->
    <main>
      <article>
        <h1>Агрегатные функции в PostgreSQL: COUNT, SUM, AVG, MAX, MIN</h1>

        <p>Агрегатные функции в PostgreSQL позволяют выполнять вычисления над множеством строк в таблице и возвращать одно итоговое значение. Эти функции часто используются в аналитических запросах для получения статистической информации по данным.</p>

        <h2>Основные агрегатные функции</h2>

        <ul>
            <li><strong>COUNT:</strong> возвращает количество строк.</li>
            <li><strong>SUM:</strong> возвращает сумму значений в столбце.</li>
            <li><strong>AVG:</strong> возвращает среднее арифметическое значений в столбце.</li>
            <li><strong>MAX:</strong> возвращает максимальное значение в столбце.</li>
            <li><strong>MIN:</strong> возвращает минимальное значение в столбце.</li>
        </ul>

        <h2>Функция COUNT</h2>
        <p>Функция <code>COUNT</code> используется для подсчёта количества строк в таблице или количества ненулевых значений в указанном столбце.</p>

        <h3>Пример</h3>
        <p>Посчитать количество всех пользователей в таблице:</p>
        <pre><code>SELECT COUNT(*) FROM users;</code></pre>

        <p>Подсчитать количество уникальных городов в таблице пользователей:</p>
        <pre><code>SELECT COUNT(DISTINCT city) FROM users;</code></pre>

        <h2>Функция SUM</h2>
        <p>Функция <code>SUM</code> возвращает сумму всех значений в столбце. Применяется обычно для числовых данных.</p>

        <h3>Пример</h3>
        <p>Найти общую сумму всех продаж:</p>
        <pre><code>SELECT SUM(sale_amount) FROM sales;</code></pre>

        <p>Этот запрос вернёт общую сумму всех записей в столбце <code>sale_amount</code>.</p>

        <h2>Функция AVG</h2>
        <p>Функция <code>AVG</code> используется для вычисления среднего арифметического всех значений в столбце.</p>

        <h3>Пример</h3>
        <p>Найти средний возраст пользователей:</p>
        <pre><code>SELECT AVG(age) FROM users;</code></pre>

        <p>Этот запрос вернёт средний возраст всех пользователей из таблицы <code>users</code>.</p>

        <h2>Функции MAX и MIN</h2>
        <p>Функции <code>MAX</code> и <code>MIN</code> используются для нахождения максимального и минимального значений в столбце соответственно.</p>

        <h3>Примеры</h3>
        <p>Найти максимальную цену товара:</p>
        <pre><code>SELECT MAX(price) FROM products;</code></pre>

        <p>Найти минимальный возраст пользователя:</p>
        <pre><code>SELECT MIN(age) FROM users;</code></pre>

        <h2>Использование с группировкой (GROUP BY)</h2>
        <p>Часто агрегатные функции используются вместе с оператором <code>GROUP BY</code> для выполнения вычислений по группам данных.</p>

        <h3>Пример</h3>
        <p>Найти количество пользователей в каждом городе:</p>
<pre>
  <code>
    SELECT city, COUNT(*) 
    FROM users 
    GROUP BY city;
  </code>
</pre>

        <p>Этот запрос сгруппирует пользователей по городам и посчитает количество пользователей в каждом городе.</p>

        <h2>Заключение</h2>
        <p>Агрегатные функции в PostgreSQL являются мощным инструментом для анализа данных. Они позволяют сводить большие наборы данных к компактным и полезным итогам, таким как сумма, среднее, минимум, максимум или количество записей. При совместном использовании с <code>GROUP BY</code> можно эффективно группировать и анализировать данные по категориям.</p>
        
        <p><strong>Описание ключевых моментов:</strong></p>
        <ol>
          <li><strong>COUNT</strong> — подсчёт всех строк или уникальных значений.</li>
          <li><strong>SUM</strong> — вычисление суммы значений в столбце.</li>
          <li><strong>AVG</strong> — нахождение среднего арифметического.</li>
          <li><strong>MAX</strong> и <strong>MIN</strong> — нахождение максимального и минимального значений.</li>
          <li><strong>GROUP BY</strong> — группировка данных для агрегирования.</li>
        </ol>

      </article>
    </main>

    <!--блок в нижней части страницы-->
    <footer> 
      <p>©Copyright 2024 by nobody. All rights reversed.</p>
    </footer>

  </body>
</html>